{
        "mainCol": [
                {
                        "title": "Quick start",
                        "text": "DIANA may seem like a very complex tool at first, but remember that is it conducting a complex task. With this in mind we have made efforts to make DIANA as usable as possible. To get started using DIANA please follow the instructions below, which describe how DIANA can be installed on a Debian/Ubuntu system. We also try this new installation out with a small example data set, downloadable from the side column. <br>The entire installation will be carried out via the command line."
                },
                {
                        "title": "Installation",
                        "text": "<h3>Preinstallation</h3>Since DIANA uses the Java virtual machine (JVM) and python, we must first ensure that these are installed before proceeding. Check that java is installed with the correct version by running <tt>java -version</tt>. If you do not have java 1.7 (or later - for the current Diana version Java 1.8 is needed) installed, please install it via <br><pre>sudo apt-get install openjdk-7-jre</pre> or download the latest java 1.8 JVM from the Oracle legacy archives.<br>A number of python packages are needed to run pyprophet. These can be a bit tricky to install correctly to get the version exactly right, so follow the below commands with informed care (on Ubuntu Server 12.04 LTS).<br><pre>sudo apt-get install python-pip<br>sudo pip install numpy==1.8.0<br>sudo pip install scipy==0.9.0<br>sudo apt-get install python-matplotlib<br>sudo pip install sklearn==0.13.1<br>sudo pip install pandas==0.12.0</pre><h3>Download DIANA</h3>For the sake of getting started, download the original 1.0.0 version of DIANA, from <a href=\"https://github.com/ComputationalProteomics/computationalproteomics.github.io/releases/download/diana-assets/diana-1.0.0.zip\">here</a>, and extract into a folder that we will call DIANA_SETUP.<br><h3>Install PyProphet</h3>Start by changing directory to <tt>DIANA_SETUP/pyprophet</tt>. There, run<br><pre>export PYTHONPATH=~/bin/pyprophet/lib/python2.7/site-packages<br>python setup.py install --prefix=~/bin/pyprophet<br></pre> to install pyprophet in your home directory/bin.<h3>Install DIANA</h3>Simply copy the <tt>bin</tt> directory from DIANA_SETUP into ~/bin/diana <br><pre>mkdir ~/bin/diana<br>cp -r DIANA_SETUP/bin ~/bin/diana/<br>cd ~/bin/diana/bin<br>chmod +x *</pre>Also add the following to your .bashrc or similar <br><pre>export PATH=$PATH:~/bin/diana/bin<br>export PYTHONPATH=~/bin/pyprophet/lib/python2.7/site-packages<br>export DIANA_DIR=~/bin/diana<br></pre><h3>Did it work?</h3>If installation was succesfull you should be able to type <tt>diana</tt> from any location and get a description of the DIANA main tool which looks something like this <pre> diana [OPTIONS] CONF SWATH_LIST_FILE TARGET_ASSAY_LIST DECOY_ASSAY_LIST IRT_ASSAYS<br><br>CONF:<br>a configuration file were each row has a key-value pair separated by a = char. Whitespaces are ignored.<br><br>SWATH_LIST_FILE:<br>file that lists the swath raw data files that are supposed to be analyzed. Each row contains the absolute path to one .raw or .wiff file that is to be analyzed.<br><br>TARGET_ASSAY_LIST / DECOY_ASSAY_LIST:<br>file that lists target/decoy assay sets to be analyzed. Each row contains the absolute path to one .traml assay file. Each of these will be searched on every file in the SWATH_LIST_FILE. As a special case, if the file is of type .traml this file will be used directly as a 1 file list. If there are more target assay files than decoys, the decoys will be recycled. If there are more decoys assays files, only the first will be used.<br><br>IRT_ASSAYS:<br>traml assay file for the peptides to be used for iRT retention time normalization. <br><br>OPTIONS:<br> -d                      do dryrun<br> --diana-dir=DIRECTORY   were diana folder is<br></pre>For final confirmation, please follow the tutorial below!<h3>Notes</h3>For the latest versions of DIANA and PyProphet, use <tt>http://github.com/flevander/diana</tt> and <tt>https://github.com/fickludd/pyprophet/archive/master.zip</tt>"
                },
                {
                        "title": "DIANA tutorial",
                        "text": "<h3>Download example data</h3>We provide an miniature data set to check that a new installation is working and to get accustomed with running DIANA. This can be downloaded <a href=\"https://github.com/ComputationalProteomics/computationalproteomics.github.io/releases/download/diana-assets/diana-tutorial.zip\">here</a>. Extract this archive into any directory, hereafter refered to as DIANA_TUT. <h3>Example overview</h3>The archive contains only a few files. In the top level are two configuration files - the main DIANA configuration in done in <tt>diana.conf.template</tt>, and pyprophet configuration is done in <tt>pyprophet.conf</tt>. Note that the main configuration file has an .template extension. This because this file needs to be copied and edited before each new analysis, as we will see soon. All configuration options (as of DIANA 1.0.0) are described at the end of this tutorial.<br>Apart from the configuration files the tutorial archive contains a input directory. Here are the minimal 4 inputs files needed to run DIANA: a target .mzML file with experimental data, and 3 .traml files with MS assays for target, decoy and irt calibration peptides.<h3>Running DIANA</h3>To run DIANA, we start by making a main configuration file. Run <pre>cd DIANA_TUT<br>cp diana.conf.template diana.conf<br></pre>If you open diana.conf, it looks like this <pre>ExtractResolution = 20<br>ExtractMode = uniform<br>AnalysisDir = INPUT_CORRECT_ABSOLUTE_PATH_HERE<br>NumIsotopes = 3<br>DeleteIntermediaryData = False<br>StartStage = 1<br>StopStage = 6<br>PyProphetConf = INPUT_CORRECT_ABSOLUTE_PATH_HERE<br></pre>Edit this file (and remember to edit diana.conf - not diana.conf.template), so the paths are correct:<pre>ExtractResolution = 20<br>ExtractMode = uniform<br>AnalysisDir = DIANA_TUT<br>NumIsotopes = 3<br>DeleteIntermediaryData = False<br>StartStage = 1<br>StopStage = 6<br>PyProphetConf = DIANA_TUT/pyprophet.conf<br></pre>where DIANA_TUT is the directory where the tutorial files where extracted.<br>If you installed DIANA as described above, we can now run it using <pre>cd DIANA_TUT<br>diana diana.conf input/gold_std_120225_009.mzML.gz input/target_345_aquas.traml \\ input/decoy_345_aquas.traml input/irt-kit-final.traml</pre><h3>DIANA output</h3>When run, DIANA will create a new directory for each data file analyzed. In our case this will be <tt>DIANA_TUT/gold_std_120225_09.mzML</tt>. This output directory contains a scary amount of files. However, most of them are intermediary, and not of interest unless something has gone wrong. The first ones to check are the figures. The two .png images are figures of the retention time mapping. A nice linear regression in the round2 one indicates a succesfull retention time map. Next, check the semi-supervised learning in the file ending with _report.pdf. The final output for all considered peaks for all target peptides in found in the file ending with _output.csv. This can be very large, to extract only the top scoring peak for each peptide, run <pre>diana-clean gold_std_120225_009.mzML/gold_std_120225_009.mzML_all_targets.pyProph_output.csv</pre> and the top scoring peaks will stored in <tt>DIANA_TUT/rank1.csv</tt><h3>Configuration</h3>Main DIANA configuration parameters:<pre>ExtractResolution: the resolution in ppm that will be used for chromatogram extraction<br>ExtractMode: the windows shape used in extraction - see DianaExtractor<br>NumIsotopes: The number of top abundant precursor isotopes to search for<br>DeleteIntermediaryData: DIA files are big - if true chrom mzML files are deleted after use.<br>StartStage/EndStage: change these to control what part of DIANA to run</pre> For pyprophet configuration please see pyprophet help output."
                }
        ],
        "sideCol": [
                {
                        "title": "Downloads",
                        "text": "The latest binaries can be checked out from <tt>https://github.com/flevander/diana</tt>. "
                },
                {
                        "file": "diana-1.0.0.zip",
                        "text": "Diana tools and pipeline scripts, as used in the original manuscript."
                },
                {
                        "file": "diana-source-1.0.0.zip",
                        "text": "Source code archive of Diana tools and scripts, as used in the original manuscript."
                },
                {
                        "file": "diana-tutorial.zip",
                        "text": "Minimal tutorial to help the new user getting started, and to test a new DIANA installation."
                },
                {
                        "title": "Source code",
                        "text": "The latest source code for Diana is available at <tt>https://github.com/flevander/diana</tt>."
                }
        ]
}

